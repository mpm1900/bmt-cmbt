import{r as d,j as t,u as Hr,R as Rt,L as Ur}from"./index-Dt9rb5LA.js";import{c as ce,M as Vr,H as Kr,J as zt,K as Yr,L as $r,N as Wr,O as qr,j as T,u as Te,g as le,P as R,Q as B,k as b,m as K,l as Xr,t as Jr,a as v,w as y,T as Je,U as st,V as Gt,W as Qr,X as Zr,Y as z,B as G,Z as at,_ as Qe,$ as it,a0 as ve,y as ct,z as te,E as q,a1 as eo,a2 as Ht,G as lt,a3 as Ut,x as Vt,v as H,a4 as X,a5 as J,a6 as to,a7 as no,a8 as ro,a9 as oo,aa as Ze,ab as so,ac as ao,ad as io,i as Kt,h as Z,f as _e,e as Yt,R as co,A as lo,ae as $t,n as Wt,af as uo,o as qt,p as Xt,q as Jt,F as Qt,D as Zt,r as fo,s as po,ag as en,C as ho,ah as ke,ai as pe,b as xo,I as mo,aj as go,ak as vo,al as bo,am as wo,an as jo,ao as yo,ap as Et,aq as Co,ar as Do,as as Io,at as Ao,au as No,av as So,aw as tn,ax as nn,ay as rn,az as on,aA as sn,aB as an,aC as Po,aD as dt,aE as Ro,S as xe,aF as Eo,aG as Mo,aH as To,aI as _o,aJ as ko,aK as Oo,aL as Lo,aM as Fo,aN as Bo}from"./useGameState-Dh46kmfd.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Go=ce("arrow-up",zo);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uo=ce("circle",Ho);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ko=ce("ellipsis",Vo);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$o=ce("loader-circle",Yo);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ut=ce("target",Wo);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cn=ce("x",qo);function Mt(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Xo(...e){return n=>{let r=!1;const o=e.map(s=>{const a=Mt(s,n);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<o.length;s++){const a=o[s];typeof a=="function"?a():Mt(e[s],null)}}}}function Jo(...e){return d.useCallback(Xo(...e),e)}class Qo extends d.Component{getSnapshotBeforeUpdate(n){const r=this.props.childRef.current;if(r&&n.isPresent&&!this.props.isPresent){const o=r.offsetParent,s=Kr(o)&&o.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Zo({children:e,isPresent:n,anchorX:r,root:o}){const s=d.useId(),a=d.useRef(null),i=d.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=d.useContext(Vr),l=Jo(a,e?.ref);return d.useInsertionEffect(()=>{const{width:f,height:u,top:p,left:h,right:x}=i.current;if(n||!a.current||!f||!u)return;const m=r==="left"?`left: ${h}`:`right: ${x}`;a.current.dataset.motionPopId=s;const w=document.createElement("style");c&&(w.nonce=c);const g=o??document.head;return g.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${p}px !important;
          }
        `),()=>{g.contains(w)&&g.removeChild(w)}},[n]),t.jsx(Qo,{isPresent:n,childRef:a,sizeRef:i,children:d.cloneElement(e,{ref:l})})}const es=({children:e,initial:n,isPresent:r,onExitComplete:o,custom:s,presenceAffectsLayout:a,mode:i,anchorX:c,root:l})=>{const f=zt(ts),u=d.useId();let p=!0,h=d.useMemo(()=>(p=!1,{id:u,initial:n,isPresent:r,custom:s,onExitComplete:x=>{f.set(x,!0);for(const m of f.values())if(!m)return;o&&o()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[r,f,o]);return a&&p&&(h={...h}),d.useMemo(()=>{f.forEach((x,m)=>f.set(m,!1))},[r]),d.useEffect(()=>{!r&&!f.size&&o&&o()},[r]),i==="popLayout"&&(e=t.jsx(Zo,{isPresent:r,anchorX:c,root:l,children:e})),t.jsx(Yr.Provider,{value:h,children:e})};function ts(){return new Map}const Ie=e=>e.key||"";function Tt(e){const n=[];return d.Children.forEach(e,r=>{d.isValidElement(r)&&n.push(r)}),n}const de=({children:e,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:c="left",root:l})=>{const[f,u]=$r(i),p=d.useMemo(()=>Tt(e),[e]),h=i&&!f?[]:p.map(Ie),x=d.useRef(!0),m=d.useRef(p),w=zt(()=>new Map),[g,C]=d.useState(p),[S,N]=d.useState(p);Wr(()=>{x.current=!1,m.current=p;for(let E=0;E<S.length;E++){const I=Ie(S[E]);h.includes(I)?w.delete(I):w.get(I)!==!0&&w.set(I,!1)}},[S,h.length,h.join("-")]);const M=[];if(p!==g){let E=[...p];for(let I=0;I<S.length;I++){const A=S[I],D=Ie(A);h.includes(D)||(E.splice(I,0,A),M.push(A))}return a==="wait"&&M.length&&(E=M),N(Tt(E)),C(p),null}const{forceRender:L}=d.useContext(qr);return t.jsx(t.Fragment,{children:S.map(E=>{const I=Ie(E),A=i&&!f?!1:p===S||h.includes(I),D=()=>{if(w.has(I))w.set(I,!0);else return;let P=!0;w.forEach(k=>{k||(P=!1)}),P&&(L?.(),N(m.current),i&&u?.(),o&&o())};return t.jsx(es,{isPresent:A,initial:!x.current||r?void 0:!1,custom:n,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:A?void 0:D,anchorX:c,children:E},I)})})};function ln(e,n,r,o){const a=e.combat?.phase==="planning",i=!a&&!!n?.targetIDs.includes(r??void 0),c=!a&&!!n?.positions.find(l=>l.playerID===o.playerID&&l.index===o.index);return i||c}function ns(e,n){return d.useReducer((r,o)=>n[r][o]??r,e)}var ft="ScrollArea",[dn]=le(ft),[rs,U]=dn(ft),un=d.forwardRef((e,n)=>{const{__scopeScrollArea:r,type:o="hover",dir:s,scrollHideDelay:a=600,...i}=e,[c,l]=d.useState(null),[f,u]=d.useState(null),[p,h]=d.useState(null),[x,m]=d.useState(null),[w,g]=d.useState(null),[C,S]=d.useState(0),[N,M]=d.useState(0),[L,E]=d.useState(!1),[I,A]=d.useState(!1),D=T(n,k=>l(k)),P=Te(s);return t.jsx(rs,{scope:r,type:o,dir:P,scrollHideDelay:a,scrollArea:c,viewport:f,onViewportChange:u,content:p,onContentChange:h,scrollbarX:x,onScrollbarXChange:m,scrollbarXEnabled:L,onScrollbarXEnabledChange:E,scrollbarY:w,onScrollbarYChange:g,scrollbarYEnabled:I,onScrollbarYEnabledChange:A,onCornerWidthChange:S,onCornerHeightChange:M,children:t.jsx(R.div,{dir:P,...i,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});un.displayName=ft;var fn="ScrollAreaViewport",pn=d.forwardRef((e,n)=>{const{__scopeScrollArea:r,children:o,nonce:s,...a}=e,i=U(fn,r),c=d.useRef(null),l=T(n,c,i.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),t.jsx(R.div,{"data-radix-scroll-area-viewport":"",...a,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});pn.displayName=fn;var Y="ScrollAreaScrollbar",hn=d.forwardRef((e,n)=>{const{forceMount:r,...o}=e,s=U(Y,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,c=e.orientation==="horizontal";return d.useEffect(()=>(c?a(!0):i(!0),()=>{c?a(!1):i(!1)}),[c,a,i]),s.type==="hover"?t.jsx(os,{...o,ref:n,forceMount:r}):s.type==="scroll"?t.jsx(ss,{...o,ref:n,forceMount:r}):s.type==="auto"?t.jsx(xn,{...o,ref:n,forceMount:r}):s.type==="always"?t.jsx(pt,{...o,ref:n}):null});hn.displayName=Y;var os=d.forwardRef((e,n)=>{const{forceMount:r,...o}=e,s=U(Y,e.__scopeScrollArea),[a,i]=d.useState(!1);return d.useEffect(()=>{const c=s.scrollArea;let l=0;if(c){const f=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),t.jsx(B,{present:r||a,children:t.jsx(xn,{"data-state":a?"visible":"hidden",...o,ref:n})})}),ss=d.forwardRef((e,n)=>{const{forceMount:r,...o}=e,s=U(Y,e.__scopeScrollArea),a=e.orientation==="horizontal",i=Le(()=>l("SCROLL_END"),100),[c,l]=ns("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,s.scrollHideDelay,l]),d.useEffect(()=>{const f=s.viewport,u=a?"scrollLeft":"scrollTop";if(f){let p=f[u];const h=()=>{const x=f[u];p!==x&&(l("SCROLL"),i()),p=x};return f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,a,l,i]),t.jsx(B,{present:r||c!=="hidden",children:t.jsx(pt,{"data-state":c==="hidden"?"hidden":"visible",...o,ref:n,onPointerEnter:b(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:b(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),xn=d.forwardRef((e,n)=>{const r=U(Y,e.__scopeScrollArea),{forceMount:o,...s}=e,[a,i]=d.useState(!1),c=e.orientation==="horizontal",l=Le(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;i(c?f:u)}},10);return ie(r.viewport,l),ie(r.content,l),t.jsx(B,{present:o||a,children:t.jsx(pt,{"data-state":a?"visible":"hidden",...s,ref:n})})}),pt=d.forwardRef((e,n)=>{const{orientation:r="vertical",...o}=e,s=U(Y,e.__scopeScrollArea),a=d.useRef(null),i=d.useRef(0),[c,l]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=wn(c.viewport,c.content),u={...o,sizes:c,onSizesChange:l,hasThumb:f>0&&f<1,onThumbChange:h=>a.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function p(h,x){return us(h,i.current,c,x)}return r==="horizontal"?t.jsx(as,{...u,ref:n,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollLeft,x=_t(h,c,s.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=p(h,s.dir))}}):r==="vertical"?t.jsx(is,{...u,ref:n,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollTop,x=_t(h,c);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=p(h))}}):null}),as=d.forwardRef((e,n)=>{const{sizes:r,onSizesChange:o,...s}=e,a=U(Y,e.__scopeScrollArea),[i,c]=d.useState(),l=d.useRef(null),f=T(n,l,a.onScrollbarXChange);return d.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),t.jsx(gn,{"data-orientation":"horizontal",...s,ref:f,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Oe(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,p)=>{if(a.viewport){const h=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),yn(h,p)&&u.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&o({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Pe(i.paddingLeft),paddingEnd:Pe(i.paddingRight)}})}})}),is=d.forwardRef((e,n)=>{const{sizes:r,onSizesChange:o,...s}=e,a=U(Y,e.__scopeScrollArea),[i,c]=d.useState(),l=d.useRef(null),f=T(n,l,a.onScrollbarYChange);return d.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),t.jsx(gn,{"data-orientation":"vertical",...s,ref:f,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Oe(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,p)=>{if(a.viewport){const h=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),yn(h,p)&&u.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&o({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Pe(i.paddingTop),paddingEnd:Pe(i.paddingBottom)}})}})}),[cs,mn]=dn(Y),gn=d.forwardRef((e,n)=>{const{__scopeScrollArea:r,sizes:o,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:f,onWheelScroll:u,onResize:p,...h}=e,x=U(Y,r),[m,w]=d.useState(null),g=T(n,D=>w(D)),C=d.useRef(null),S=d.useRef(""),N=x.viewport,M=o.content-o.viewport,L=K(u),E=K(l),I=Le(p,10);function A(D){if(C.current){const P=D.clientX-C.current.left,k=D.clientY-C.current.top;f({x:P,y:k})}}return d.useEffect(()=>{const D=P=>{const k=P.target;m?.contains(k)&&L(P,M)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[N,m,M,L]),d.useEffect(E,[o,E]),ie(m,I),ie(x.content,I),t.jsx(cs,{scope:r,scrollbar:m,hasThumb:s,onThumbChange:K(a),onThumbPointerUp:K(i),onThumbPositionChange:E,onThumbPointerDown:K(c),children:t.jsx(R.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:b(e.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),C.current=m.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),A(D))}),onPointerMove:b(e.onPointerMove,A),onPointerUp:b(e.onPointerUp,D=>{const P=D.target;P.hasPointerCapture(D.pointerId)&&P.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=S.current,x.viewport&&(x.viewport.style.scrollBehavior=""),C.current=null})})})}),Se="ScrollAreaThumb",vn=d.forwardRef((e,n)=>{const{forceMount:r,...o}=e,s=mn(Se,e.__scopeScrollArea);return t.jsx(B,{present:r||s.hasThumb,children:t.jsx(ls,{ref:n,...o})})}),ls=d.forwardRef((e,n)=>{const{__scopeScrollArea:r,style:o,...s}=e,a=U(Se,r),i=mn(Se,r),{onThumbPositionChange:c}=i,l=T(n,p=>i.onThumbChange(p)),f=d.useRef(void 0),u=Le(()=>{f.current&&(f.current(),f.current=void 0)},100);return d.useEffect(()=>{const p=a.viewport;if(p){const h=()=>{if(u(),!f.current){const x=fs(p,c);f.current=x,c()}};return c(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[a.viewport,u,c]),t.jsx(R.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:b(e.onPointerDownCapture,p=>{const x=p.target.getBoundingClientRect(),m=p.clientX-x.left,w=p.clientY-x.top;i.onThumbPointerDown({x:m,y:w})}),onPointerUp:b(e.onPointerUp,i.onThumbPointerUp)})});vn.displayName=Se;var ht="ScrollAreaCorner",bn=d.forwardRef((e,n)=>{const r=U(ht,e.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&o?t.jsx(ds,{...e,ref:n}):null});bn.displayName=ht;var ds=d.forwardRef((e,n)=>{const{__scopeScrollArea:r,...o}=e,s=U(ht,r),[a,i]=d.useState(0),[c,l]=d.useState(0),f=!!(a&&c);return ie(s.scrollbarX,()=>{const u=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(u),l(u)}),ie(s.scrollbarY,()=>{const u=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(u),i(u)}),f?t.jsx(R.div,{...o,ref:n,style:{width:a,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Pe(e){return e?parseInt(e,10):0}function wn(e,n){const r=e/n;return isNaN(r)?0:r}function Oe(e){const n=wn(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=(e.scrollbar.size-r)*n;return Math.max(o,18)}function us(e,n,r,o="ltr"){const s=Oe(r),a=s/2,i=n||a,c=s-i,l=r.scrollbar.paddingStart+i,f=r.scrollbar.size-r.scrollbar.paddingEnd-c,u=r.content-r.viewport,p=o==="ltr"?[0,u]:[u*-1,0];return jn([l,f],p)(e)}function _t(e,n,r="ltr"){const o=Oe(n),s=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,a=n.scrollbar.size-s,i=n.content-n.viewport,c=a-o,l=r==="ltr"?[0,i]:[i*-1,0],f=Jr(e,l);return jn([0,i],[0,c])(f)}function jn(e,n){return r=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const o=(n[1]-n[0])/(e[1]-e[0]);return n[0]+o*(r-e[0])}}function yn(e,n){return e>0&&e<n}var fs=(e,n=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},o=0;return(function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=r.left!==a.left,c=r.top!==a.top;(i||c)&&n(),r=a,o=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(o)};function Le(e,n){const r=K(e),o=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(o.current),[]),d.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(r,n)},[r,n])}function ie(e,n){const r=K(n);Xr(()=>{let o=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(o),s.unobserve(e)}}},[e,r])}var ps=un,hs=pn,xs=bn;function xt({className:e,children:n,...r}){return t.jsxs(ps,{"data-slot":"scroll-area",className:v("relative",e),...r,children:[t.jsx(hs,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:n}),t.jsx(ms,{}),t.jsx(xs,{})]})}function ms({className:e,orientation:n="vertical",...r}){return t.jsx(hn,{"data-slot":"scroll-area-scrollbar",orientation:n,className:v("flex touch-none p-px transition-colors select-none",n==="vertical"&&"h-full w-3 border-l border-l-transparent",n==="horizontal"&&"h-3 flex-col border-t border-t-transparent",e),...r,children:t.jsx(vn,{"data-slot":"scroll-area-thumb",className:"bg-foreground/20 relative flex-1 rounded-full"})})}function gs({action:e,context:n,active:r,onActiveChange:o}){const s=y(l=>l.state),a=Je(s,n.sourceID),i=n&&!st(e,s,n),c=Gt[e.ID];return t.jsx(Qr,{onClick:()=>o(!r),size:"xs",variant:r?"action-active":"action",className:v("cursor-default rounded-sm",{"opacity-50 pointer-events-none !cursor-not-allowed":i}),children:c?t.jsx(Zr,{renderer:c,active:r,cooldown:a?.cooldowns[e.ID]}):t.jsx("span",{className:v("text-xl title",{"text-muted-foreground":!r}),children:e.name})})}function We({state:e,action:n,target:r,type:o,allied:s,context:a,onContextChange:i}){const c=n.targets.max(e,a),l=n.targets.validate(e,a),f=Fe(a)===c;return t.jsxs(t.Fragment,{children:[o==="targetID"&&t.jsx(vs,{target:r,disabled:f&&l,context:a,allied:s,onContextChange:u=>i({...a,...u})}),o==="position"&&t.jsx(bs,{state:e,target:r,disabled:f&&l,allied:s,context:a,onContextChange:u=>i({...a,...u})})]})}function vs({target:e,context:n,disabled:r,allied:o,onContextChange:s}){const a=n.targetIDs.includes(e.ID),i=z(c=>c.set);return t.jsx(G,{size:"sm",variant:a?o?"slate-active":"stone-active":o?"slate":"stone",disabled:r&&!a,onClick:()=>{s(a?{targetIDs:n.targetIDs.filter(c=>c!==e.ID)}:{targetIDs:[...n.targetIDs,e.ID]})},onMouseEnter:()=>{i({hoverActorID:e.ID})},onMouseLeave:()=>{i({hoverActorID:void 0})},children:e.name})}function bs({state:e,target:n,disabled:r,allied:o,context:s,onContextChange:a}){const i=z(f=>f.set),c=at(e,n.ID),l=c!==void 0&&s.positions.some(f=>Qe(f,c));return t.jsx(G,{size:"sm",variant:l?o?"slate-active":"stone-active":o?"slate":"stone",disabled:r&&!l,onClick:()=>{c&&(l&&a({positions:s.positions.filter(f=>!Qe(f,c))}),l||a({positions:[...s.positions,c]}))},onMouseEnter:()=>{i({hoverActorID:n.ID})},onMouseLeave:()=>{i({hoverActorID:void 0})},children:n.name})}function qe({state:e,action:n,target:r,type:o,index:s,allied:a,context:i,onContextChange:c,next:l}){const f=n.targets.max(e,i),u=Fe(i)===f;if(o==="targetID")return t.jsx(ws,{allied:a,target:r,disabled:!0,index:s,context:i,onContextChange:p=>{c({...i,...p}),u||l()}});if(o==="position")return t.jsx(js,{state:e,allied:a,target:r,disabled:!0,index:s,context:i,onContextChange:p=>{c({...i,...p}),u||l()}})}function ws({target:e,index:n,disabled:r,allied:o,context:s,onContextChange:a}){const i=z(f=>f.set),l=s.targetIDs[n]===e.ID;return t.jsxs(G,{size:"sm",variant:l?o?"slate-active":"stone-active":o?"slate":"stone",disabled:r&&l,onClick:()=>{if(l)return;const f=[...s.targetIDs];f[n]=e.ID,a({targetIDs:f})},onMouseEnter:()=>{i({hoverActorID:e.ID})},onMouseLeave:()=>{i({hoverActorID:void 0})},children:[l&&t.jsx(ut,{}),e.name]})}function js({state:e,target:n,disabled:r,allied:o,index:s,context:a,onContextChange:i}){const c=z(p=>p.set),l=at(e,n.ID),f=a.positions[s],u=Qe(l,f);return t.jsxs(G,{size:"sm",variant:u?o?"slate-active":"stone-active":o?"slate":"stone",disabled:r&&u,onClick:()=>{if(!l||u)return;const p=[...a.positions];p[s]=l,i({positions:p})},onMouseEnter:()=>{c({hoverActorID:n.ID})},onMouseLeave:()=>{c({hoverActorID:void 0})},children:[u&&t.jsx(ut,{}),n.name]})}const ys=it("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-sm has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function Cn({className:e,orientation:n,...r}){return t.jsx("div",{role:"group","data-slot":"button-group","data-orientation":n,className:v(ys({orientation:n}),e),...r})}function Cs({state:e,action:n,context:r,index:o,onIndexChange:s}){const a=n.targets.max(e,r),i=Fe(r)===a,c=Array.from({length:a});return t.jsx(Cn,{className:v("rounded-sm ring ring-black border",{"border-ring":i}),children:c.map((l,f)=>t.jsx(G,{className:"rounded-sm",variant:f===o?"default":r.positions[f]?"secondary":"ghost",size:"icon-sm",onClick:()=>s(f),children:r.positions[f]?t.jsx(ut,{}):t.jsx(Uo,{className:"opacity-20"})},f))})}function Fe(e){return e.positions.filter(n=>!!n).length+e.targetIDs.filter(n=>!!n).length}function Ds({action:e,context:n,onContextChange:r,state:o}){const s=H(),[a,i]=d.useState(0),c=e.targets.max(o,n),l=e.targets.get(o,n),f=new Set(l.map(p=>p.target.playerID));function u(){i(p=>(p+1)%c)}return d.useEffect(()=>{i(0)},[n.sourceID,e.ID]),t.jsxs(t.Fragment,{children:[t.jsx(Cs,{state:o,action:e,context:n,index:a,onIndexChange:i}),f.size>1&&l.length>4?t.jsxs("div",{className:"flex flex-col w-full justify-around gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("div",{className:"font-semibold text-xs text-enemy/70 hidden",children:"Enemy Targets"}),t.jsx("div",{className:"flex flex-wrap gap-2 w-full justify-center",children:l.filter(p=>p.target.playerID!==n.playerID).map(({target:p,type:h})=>t.jsx(qe,{state:o,action:e,target:p,type:h,allied:p.playerID===s,index:a,context:n,onContextChange:r,next:u},p.ID))})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("div",{className:"font-semibold text-xs text-ally/80 hidden",children:"Ally Targets"}),t.jsx("div",{className:"flex flex-wrap gap-2 w-full justify-center",children:l.filter(p=>p.target.playerID===n.playerID).map(({target:p,type:h})=>t.jsx(qe,{state:o,action:e,target:p,type:h,allied:p.playerID===s,index:a,context:n,onContextChange:r,next:u},p.ID))})]})]}):t.jsx("div",{className:"flex justify-center flex-wrap gap-2 w-full",children:e.targets.get(o,n).map(({target:p,type:h})=>t.jsx(qe,{state:o,action:e,target:p,type:h,allied:p.playerID===s,index:a,context:n,onContextChange:r,next:u},p.ID))})]})}function Is({action:e,state:n,context:r,onContextChange:o}){const s=H(),a=e.targets.get(n,r);return new Set(a.map(c=>c.target.playerID)).size>1&&a.length>4?t.jsxs("div",{className:"flex flex-col w-full justify-around pt-4 gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("div",{className:"font-semibold text-xs text-enemy/70 hidden",children:"Enemy Targets"}),t.jsx("div",{className:"flex flex-wrap gap-2 w-full justify-center",children:a.filter(c=>c.target.playerID!==r.playerID).map(({target:c,type:l})=>t.jsx(We,{state:n,action:e,target:c,type:l,allied:c.playerID===s,context:r,onContextChange:o},c.ID))})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("div",{className:"font-semibold text-xs text-ally/80 hidden",children:"Ally Targets"}),t.jsx("div",{className:"flex flex-wrap gap-2 w-full justify-center",children:a.filter(c=>c.target.playerID===r.playerID).map(({target:c,type:l})=>t.jsx(We,{state:n,action:e,target:c,type:l,allied:c.playerID===s,context:r,onContextChange:o},c.ID))})]})]}):t.jsx("div",{className:"flex justify-center flex-wrap gap-2 w-full",children:a.map(({target:c,type:l})=>t.jsx(We,{state:n,action:e,target:c,type:l,allied:c.playerID===s,context:r,onContextChange:o},c.ID))})}function As({playerID:e,action:n,sourceID:r,context:o,onContextChange:s,onContextConfirm:a}){const i=y(x=>x.state);d.useEffect(()=>{s(ve({playerID:e,sourceID:r}))},[r,n.ID]);const c=Gt[n.ID],l=n.targets.max(i,o),f=n.targets.unique?Math.min(l,n.targets.get(i,o).length):l,u=n.targets.validate(i,o),p=Fe(o),h=l===p;return t.jsxs(ct,{children:[t.jsxs(te,{className:"gap-0",children:[t.jsx(q,{className:"text-lg",children:"Select Targets"}),t.jsx(eo,{className:"text-xs",children:l>0?t.jsxs("span",{children:[p," of ",f," Targets selected."]}):t.jsx("span",{children:"No selection required."})}),c&&t.jsx(Ht,{children:t.jsx(c.Icon,{})})]}),t.jsx(lt,{className:"px-8",children:t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[!n.targets.unique&&t.jsx(Ds,{action:n,state:i,context:o,onContextChange:s}),n.targets.unique&&t.jsx(Is,{action:n,state:i,context:o,onContextChange:s})]})}),t.jsx(Ut,{className:"justify-end items-center gap-4",children:t.jsxs(G,{disabled:!u,className:v({"!opacity-0":!u}),variant:h?"default":"secondary",onClick:()=>a(o),children:["Confirm ",f>1&&u&&`(${p}/${f})`,t.jsx(Vt,{})]})})]})}function be({playerID:e,source:n,actions:r,activeActionID:o,onActiveActionIDChange:s,onActionConfirm:a,children:i}){const[c,l]=d.useState(ve({playerID:e})),f=r.find(u=>u.ID===o);return t.jsxs(X.div,{className:"w-192 gap-2",initial:{scale:1,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:[i,t.jsxs("div",{className:v("flex gap-2",{"items-start":r.length<=1}),children:[t.jsx(xt,{className:"flex-1 max-h-100 bg-card/70 p-2 px-3 rounded-xs border ring ring-black",children:t.jsx("div",{className:"flex flex-col gap-1 px-px",children:r.map(u=>t.jsx(gs,{action:u,context:c,active:u.ID===o,onActiveChange:()=>{s(u.ID)}},u.ID))})}),f&&t.jsx("div",{className:"flex-1",children:t.jsx(As,{playerID:e,action:f,sourceID:n?.ID,context:c,onContextChange:l,onContextConfirm:u=>{a(f,u)}})})]})]})}function Ns(){const{state:e,resolvePrompt:n}=y(s=>s),r=H(),o=e.promptQueue[0];if(o&&o.context.playerID===r){const s=o.action,a=o.context,i=J(e,a.sourceID);return t.jsx(be,{playerID:a.playerID,source:i,actions:[s],activeActionID:s.ID,onActiveActionIDChange:()=>{},onActionConfirm:(c,l)=>{n(l)},children:t.jsx(te,{children:t.jsx(q,{children:"Select Character(s)"})})},o.ID)}return t.jsx("div",{className:"w-172"})}function Ss(){const{state:e,pushAction:n}=y(c=>c),{activeActionID:r,activeActorID:o,set:s}=z(c=>c),i=e.actors.map(c=>to(c,e.effects)).find(c=>c.ID===o);return i?t.jsx(t.Fragment,{children:t.jsx(be,{playerID:i.playerID,source:i,actions:i.actions.concat(no),activeActionID:r,onActiveActionIDChange:c=>s({activeActionID:c}),onActionConfirm:(c,l)=>n(c,l),children:t.jsx(te,{children:t.jsx(q,{className:"text-center",children:"Choose an Action"})})})}):null}function Ps({current:e}){const{state:n,resolvePrompt:r}=y(f=>f),o=H(),s=n.promptQueue[0],a=J(n,s?.context.sourceID),i=J(n,e?.context.sourceID),c=s&&s.context.playerID===o,l=!c&&e&&i;return t.jsxs(de,{mode:"wait",children:[c&&t.jsx(Rs,{action:s.action,context:s.context,source:a,onActionConfirm:f=>r(f)},s.ID),l&&t.jsx(Es,{action:e.action,context:e.context,source:i},e.ID)]})}function Rs({context:e,source:n,action:r,onActionConfirm:o}){return t.jsx(be,{playerID:e.playerID,source:n,actions:[r],activeActionID:r.ID,onActiveActionIDChange:()=>{},onActionConfirm:(s,a)=>{o(a)},children:t.jsx(te,{children:t.jsx(q,{children:"Select Character(s)"})})})}function Es({action:e,source:n,context:r}){const o=y(c=>c.state),s=r.targetIDs.map(c=>Je(o,c)).filter(Boolean),a=r.positions.map(c=>Je(o,ro(o,c.playerID)[c.index]??void 0)).filter(Boolean),i=new Set(s.map(c=>c?.name).concat(a.map(c=>c?.name)));return t.jsxs(X.div,{className:"w-full text-center self-center justify-self-center m-auto z-30 py-20",transition:{duration:.4},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{background:"radial-gradient(circle,rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.54) 6%, rgba(0, 0, 0, 0) 16%)"},children:[t.jsxs("div",{className:"text-center",children:[n.name," uses"]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute w-80 h-full top-0 left-46 z-0"}),t.jsx("h1",{className:"text-6xl font-black text-center z-10 relative text-shadow-lg",children:e.name})]}),t.jsx("div",{children:Array.from(i).join(", ")})]})}function Ms(){const{state:e,resolvePrompt:n}=y(s=>s),r=H(),o=e.promptQueue[0];if(o&&o.context.playerID===r){const s=o.action,a=o.context,i=J(e,a.sourceID);return t.jsx(be,{playerID:a.playerID,source:i,actions:[s],activeActionID:s.ID,onActiveActionIDChange:()=>{},onActionConfirm:(c,l)=>{n(l)},children:t.jsx(te,{children:t.jsx(q,{children:"Select Character(s)"})})},o.ID)}return t.jsx("div",{className:"w-172"})}function Ts(){const{state:e,resolvePrompt:n}=y(s=>s),r=H(),o=e.promptQueue[0];if(o&&o.context.playerID===r){const s=o.action,a=o.context,i=J(e,a.sourceID);return t.jsx(be,{playerID:a.playerID,source:i,actions:[s],activeActionID:s.ID,onActiveActionIDChange:()=>{},onActionConfirm:(c,l)=>{n(l)},children:t.jsx(te,{children:t.jsx(q,{className:"text-center",children:"Combat Initiated"})})},o.ID)}return null}function Dn({children:e,className:n,...r}){return t.jsx("div",{...r,className:v("flex items-center justify-center my-8",n),children:t.jsx("div",{className:"relative flex-1 flex items-center justify-center gap-4 w-286",children:e})})}function _s(){const{state:e,deleteCombat:n}=y(i=>i),r=H(),o=e.players.find(i=>i.ID===r),s=e.players.find(i=>i.ID!==r),a=oo(e,o);return t.jsxs(ct,{className:"w-90 m-auto",transition:{duration:.4},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[t.jsx(te,{children:a?t.jsx(q,{children:"You Lose."}):t.jsx(q,{children:"Victory!"})}),!a&&t.jsxs(lt,{children:[t.jsx("p",{children:"Rewards:"}),t.jsxs("span",{className:"inline-flex items-center",children:[s.credits," ",t.jsx(Ze,{})]}),t.jsx("ul",{children:s.items.map(i=>t.jsx("li",{children:i.name},i.ID))})]}),t.jsx(Ut,{className:"justify-end",children:!a&&t.jsxs(G,{onClick:()=>{n()},children:["Continue",t.jsx(Vt,{})]})})]})}function ks(e,n){switch(e){case"action":return 1500;case"trigger":return n==="main"?500:100;default:return 100}}function mt(){const e=y(s=>s.next),n=y(s=>s.state),r=so(n),o=n.combat.phase;d.useEffect(()=>{const s=setInterval(()=>{e()},ks(r,o));return()=>clearInterval(s)},[r,o])}function Os(){switch(y(n=>n.state.combat?.phase)){case"start":return t.jsx(Ls,{});case"planning":return t.jsx(Fs,{});case"main":return t.jsx(Bs,{});case"end":case"pre":return t.jsx(zs,{});default:return null}}function Ls(){return mt(),null}function Fs(){const e=y(o=>o.state),n=z(o=>o.resetActive),r=e.actionQueue.map(o=>o.ID).length;return d.useEffect(()=>{n(e)},[r]),null}function Bs(){return mt(),null}function zs(){return mt(),null}function Gs({current:e}){const r=y(o=>o.state).combat.phase;return r?t.jsxs(t.Fragment,{children:[t.jsx(Os,{}),t.jsxs(Dn,{children:[r==="start"&&t.jsx(Ns,{}),r==="planning"&&t.jsx(Ss,{}),r==="main"&&t.jsx(Ps,{current:e}),r==="end"&&t.jsx(Ms,{}),r==="pre"&&t.jsx(Ts,{}),r==="post"&&t.jsx(_s,{})]})]}):null}function Hs({sourceActor:e,sourcePosition:n,state:r,targetID:o}){const s=H(),i=z(N=>N.actorPositions)[o];if(!i)return null;const c=J(r,o);if(!c)return null;const l=e.playerID===s,f=c.playerID===s,u=n.x+n.width/2,p=l?n.y-n.height+20:n.y+n.height*2,h=i.x+i.width/2,x=f?i.y-i.height+20:i.y+i.height*2,m=h-u,w=x-p,C=Math.sqrt(m*m+w*w)/3*(f?-1:1),S=`M ${u},${p} C ${u},${p-C} ${h},${x+C} ${h},${x}`;return t.jsx("g",{children:t.jsx("path",{d:S,stroke:l?"var(--color-ally)":"var(--color-enemy)",strokeWidth:"2",fill:"none",strokeDasharray:"5, 5",children:t.jsx("animate",{attributeName:"stroke-dashoffset",from:"1000",to:"0",dur:"15s",repeatCount:"indefinite"})})},o)}function Us({currentAction:e}){const n=z(i=>i.actorPositions),r=y(i=>i.state),o=ao(r,e.context),s=n[o.sourceID];if(!s)return null;const a=J(r,o.sourceID);return a?t.jsx("svg",{className:"absolute inset-0 pointer-events-none h-screen w-screen z-0",children:o.targetIDs.map(i=>i&&t.jsx(Hs,{sourceActor:a,sourcePosition:s,state:r,targetID:i}))}):null}const Vs=ve({playerID:io.getState().playerID});function Ks({className:e,...n}){const r=y(u=>u.state),o=r.messageLog,a=r.encounter.nodes.find(u=>u.ID===r.encounter.activeNodeID)?.messages(r,Vs).map(u=>u.ID)??[],i=o.slice(0,a.length*-1),c=o.slice(a.length*-1),l=!c.every(u=>a.includes(u.ID)),f=d.useRef(null);return Hr(()=>{f.current&&f.current.scrollIntoView({behavior:"auto"})},[o.length]),t.jsx(xt,{className:v("max-h-50 px-3",e),...n,children:t.jsxs("ul",{className:"text-xs text-muted-foreground pt-2",children:[i.map((u,p)=>t.jsx("li",{style:{opacity:u.depth>0?.7:1,paddingLeft:u.depth*16},children:u.text},p+u.ID)),l&&c.map(u=>t.jsx("li",{style:{opacity:u.depth>0?.7:1,paddingLeft:u.depth*16},children:u.text},u.ID)),t.jsx("div",{ref:f})]})})}var Xe="rovingFocusGroup.onEntryFocus",Ys={bubbles:!1,cancelable:!0},we="RovingFocusGroup",[et,In,$s]=Kt(we),[Ws,Be]=le(we,[$s]),[qs,Xs]=Ws(we),An=d.forwardRef((e,n)=>t.jsx(et.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(et.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Js,{...e,ref:n})})}));An.displayName=we;var Js=d.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:f,preventScrollOnEntryFocus:u=!1,...p}=e,h=d.useRef(null),x=T(n,h),m=Te(a),[w,g]=_e({prop:i,defaultProp:c??null,onChange:l,caller:we}),[C,S]=d.useState(!1),N=K(f),M=In(r),L=d.useRef(!1),[E,I]=d.useState(0);return d.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(Xe,N),()=>A.removeEventListener(Xe,N)},[N]),t.jsx(qs,{scope:r,orientation:o,dir:m,loop:s,currentTabStopId:w,onItemFocus:d.useCallback(A=>g(A),[g]),onItemShiftTab:d.useCallback(()=>S(!0),[]),onFocusableItemAdd:d.useCallback(()=>I(A=>A+1),[]),onFocusableItemRemove:d.useCallback(()=>I(A=>A-1),[]),children:t.jsx(R.div,{tabIndex:C||E===0?-1:0,"data-orientation":o,...p,ref:x,style:{outline:"none",...e.style},onMouseDown:b(e.onMouseDown,()=>{L.current=!0}),onFocus:b(e.onFocus,A=>{const D=!L.current;if(A.target===A.currentTarget&&D&&!C){const P=new CustomEvent(Xe,Ys);if(A.currentTarget.dispatchEvent(P),!P.defaultPrevented){const k=M().filter($=>$.focusable),oe=k.find($=>$.active),Ce=k.find($=>$.id===w),Ke=[oe,Ce,...k].filter(Boolean).map($=>$.ref.current);Pn(Ke,u)}}L.current=!1}),onBlur:b(e.onBlur,()=>S(!1))})})}),Nn="RovingFocusGroupItem",Sn=d.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:s=!1,tabStopId:a,children:i,...c}=e,l=Z(),f=a||l,u=Xs(Nn,r),p=u.currentTabStopId===f,h=In(r),{onFocusableItemAdd:x,onFocusableItemRemove:m,currentTabStopId:w}=u;return d.useEffect(()=>{if(o)return x(),()=>m()},[o,x,m]),t.jsx(et.ItemSlot,{scope:r,id:f,focusable:o,active:s,children:t.jsx(R.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...c,ref:n,onMouseDown:b(e.onMouseDown,g=>{o?u.onItemFocus(f):g.preventDefault()}),onFocus:b(e.onFocus,()=>u.onItemFocus(f)),onKeyDown:b(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const C=ea(g,u.orientation,u.dir);if(C!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let N=h().filter(M=>M.focusable).map(M=>M.ref.current);if(C==="last")N.reverse();else if(C==="prev"||C==="next"){C==="prev"&&N.reverse();const M=N.indexOf(g.currentTarget);N=u.loop?ta(N,M+1):N.slice(M+1)}setTimeout(()=>Pn(N))}}),children:typeof i=="function"?i({isCurrentTabStop:p,hasTabStop:w!=null}):i})})});Sn.displayName=Nn;var Qs={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Zs(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ea(e,n,r){const o=Zs(e.key,r);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Qs[o]}function Pn(e,n=!1){const r=document.activeElement;for(const o of e)if(o===r||(o.focus({preventScroll:n}),document.activeElement!==r))return}function ta(e,n){return e.map((r,o)=>e[(n+o)%e.length])}var Rn=An,En=Sn,tt=["Enter"," "],na=["ArrowDown","PageUp","Home"],Mn=["ArrowUp","PageDown","End"],ra=[...na,...Mn],oa={ltr:[...tt,"ArrowRight"],rtl:[...tt,"ArrowLeft"]},sa={ltr:["ArrowLeft"],rtl:["ArrowRight"]},je="Menu",[me,aa,ia]=Kt(je),[ne,Tn]=le(je,[ia,Yt,Be]),ze=Yt(),_n=Be(),[ca,re]=ne(je),[la,ye]=ne(je),kn=e=>{const{__scopeMenu:n,open:r=!1,children:o,dir:s,onOpenChange:a,modal:i=!0}=e,c=ze(n),[l,f]=d.useState(null),u=d.useRef(!1),p=K(a),h=Te(s);return d.useEffect(()=>{const x=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),t.jsx(co,{...c,children:t.jsx(ca,{scope:n,open:r,onOpenChange:p,content:l,onContentChange:f,children:t.jsx(la,{scope:n,onClose:d.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:u,dir:h,modal:i,children:o})})})};kn.displayName=je;var da="MenuAnchor",gt=d.forwardRef((e,n)=>{const{__scopeMenu:r,...o}=e,s=ze(r);return t.jsx(lo,{...s,...o,ref:n})});gt.displayName=da;var vt="MenuPortal",[ua,On]=ne(vt,{forceMount:void 0}),Ln=e=>{const{__scopeMenu:n,forceMount:r,children:o,container:s}=e,a=re(vt,n);return t.jsx(ua,{scope:n,forceMount:r,children:t.jsx(B,{present:r||a.open,children:t.jsx($t,{asChild:!0,container:s,children:o})})})};Ln.displayName=vt;var F="MenuContent",[fa,bt]=ne(F),Fn=d.forwardRef((e,n)=>{const r=On(F,e.__scopeMenu),{forceMount:o=r.forceMount,...s}=e,a=re(F,e.__scopeMenu),i=ye(F,e.__scopeMenu);return t.jsx(me.Provider,{scope:e.__scopeMenu,children:t.jsx(B,{present:o||a.open,children:t.jsx(me.Slot,{scope:e.__scopeMenu,children:i.modal?t.jsx(pa,{...s,ref:n}):t.jsx(ha,{...s,ref:n})})})})}),pa=d.forwardRef((e,n)=>{const r=re(F,e.__scopeMenu),o=d.useRef(null),s=T(n,o);return d.useEffect(()=>{const a=o.current;if(a)return Wt(a)},[]),t.jsx(wt,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:b(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),ha=d.forwardRef((e,n)=>{const r=re(F,e.__scopeMenu);return t.jsx(wt,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),xa=Jt("MenuContent.ScrollLock"),wt=d.forwardRef((e,n)=>{const{__scopeMenu:r,loop:o=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:f,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:h,onDismiss:x,disableOutsideScroll:m,...w}=e,g=re(F,r),C=ye(F,r),S=ze(r),N=_n(r),M=aa(r),[L,E]=d.useState(null),I=d.useRef(null),A=T(n,I,g.onContentChange),D=d.useRef(0),P=d.useRef(""),k=d.useRef(0),oe=d.useRef(null),Ce=d.useRef("right"),De=d.useRef(0),Ke=m?Xt:d.Fragment,$=m?{as:xa,allowPinchZoom:!0}:void 0,Gr=j=>{const ae=P.current+j,Q=M().filter(O=>!O.disabled),ue=document.activeElement,Ye=Q.find(O=>O.ref.current===ue)?.textValue,$e=Q.map(O=>O.textValue),St=Na($e,ae,Ye),fe=Q.find(O=>O.textValue===St)?.ref.current;(function O(Pt){P.current=Pt,window.clearTimeout(D.current),Pt!==""&&(D.current=window.setTimeout(()=>O(""),1e3))})(ae),fe&&setTimeout(()=>fe.focus())};d.useEffect(()=>()=>window.clearTimeout(D.current),[]),qt();const se=d.useCallback(j=>Ce.current===oe.current?.side&&Pa(j,oe.current?.area),[]);return t.jsx(fa,{scope:r,searchRef:P,onItemEnter:d.useCallback(j=>{se(j)&&j.preventDefault()},[se]),onItemLeave:d.useCallback(j=>{se(j)||(I.current?.focus(),E(null))},[se]),onTriggerLeave:d.useCallback(j=>{se(j)&&j.preventDefault()},[se]),pointerGraceTimerRef:k,onPointerGraceIntentChange:d.useCallback(j=>{oe.current=j},[]),children:t.jsx(Ke,{...$,children:t.jsx(Qt,{asChild:!0,trapped:s,onMountAutoFocus:b(a,j=>{j.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:t.jsx(Zt,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:h,onDismiss:x,children:t.jsx(Rn,{asChild:!0,...N,dir:C.dir,orientation:"vertical",loop:o,currentTabStopId:L,onCurrentTabStopIdChange:E,onEntryFocus:b(l,j=>{C.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(fo,{role:"menu","aria-orientation":"vertical","data-state":er(g.open),"data-radix-menu-content":"",dir:C.dir,...S,...w,ref:A,style:{outline:"none",...w.style},onKeyDown:b(w.onKeyDown,j=>{const Q=j.target.closest("[data-radix-menu-content]")===j.currentTarget,ue=j.ctrlKey||j.altKey||j.metaKey,Ye=j.key.length===1;Q&&(j.key==="Tab"&&j.preventDefault(),!ue&&Ye&&Gr(j.key));const $e=I.current;if(j.target!==$e||!ra.includes(j.key))return;j.preventDefault();const fe=M().filter(O=>!O.disabled).map(O=>O.ref.current);Mn.includes(j.key)&&fe.reverse(),Ia(fe)}),onBlur:b(e.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(D.current),P.current="")}),onPointerMove:b(e.onPointerMove,ge(j=>{const ae=j.target,Q=De.current!==j.clientX;if(j.currentTarget.contains(ae)&&Q){const ue=j.clientX>De.current?"right":"left";Ce.current=ue,De.current=j.clientX}}))})})})})})})});Fn.displayName=F;var ma="MenuGroup",jt=d.forwardRef((e,n)=>{const{__scopeMenu:r,...o}=e;return t.jsx(R.div,{role:"group",...o,ref:n})});jt.displayName=ma;var ga="MenuLabel",Bn=d.forwardRef((e,n)=>{const{__scopeMenu:r,...o}=e;return t.jsx(R.div,{...o,ref:n})});Bn.displayName=ga;var Re="MenuItem",kt="menu.itemSelect",Ge=d.forwardRef((e,n)=>{const{disabled:r=!1,onSelect:o,...s}=e,a=d.useRef(null),i=ye(Re,e.__scopeMenu),c=bt(Re,e.__scopeMenu),l=T(n,a),f=d.useRef(!1),u=()=>{const p=a.current;if(!r&&p){const h=new CustomEvent(kt,{bubbles:!0,cancelable:!0});p.addEventListener(kt,x=>o?.(x),{once:!0}),uo(p,h),h.defaultPrevented?f.current=!1:i.onClose()}};return t.jsx(zn,{...s,ref:l,disabled:r,onClick:b(e.onClick,u),onPointerDown:p=>{e.onPointerDown?.(p),f.current=!0},onPointerUp:b(e.onPointerUp,p=>{f.current||p.currentTarget?.click()}),onKeyDown:b(e.onKeyDown,p=>{const h=c.searchRef.current!=="";r||h&&p.key===" "||tt.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Ge.displayName=Re;var zn=d.forwardRef((e,n)=>{const{__scopeMenu:r,disabled:o=!1,textValue:s,...a}=e,i=bt(Re,r),c=_n(r),l=d.useRef(null),f=T(n,l),[u,p]=d.useState(!1),[h,x]=d.useState("");return d.useEffect(()=>{const m=l.current;m&&x((m.textContent??"").trim())},[a.children]),t.jsx(me.ItemSlot,{scope:r,disabled:o,textValue:s??h,children:t.jsx(En,{asChild:!0,...c,focusable:!o,children:t.jsx(R.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...a,ref:f,onPointerMove:b(e.onPointerMove,ge(m=>{o?i.onItemLeave(m):(i.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:b(e.onPointerLeave,ge(m=>i.onItemLeave(m))),onFocus:b(e.onFocus,()=>p(!0)),onBlur:b(e.onBlur,()=>p(!1))})})})}),va="MenuCheckboxItem",Gn=d.forwardRef((e,n)=>{const{checked:r=!1,onCheckedChange:o,...s}=e;return t.jsx(Yn,{scope:e.__scopeMenu,checked:r,children:t.jsx(Ge,{role:"menuitemcheckbox","aria-checked":Ee(r)?"mixed":r,...s,ref:n,"data-state":Ct(r),onSelect:b(s.onSelect,()=>o?.(Ee(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Gn.displayName=va;var Hn="MenuRadioGroup",[ba,wa]=ne(Hn,{value:void 0,onValueChange:()=>{}}),Un=d.forwardRef((e,n)=>{const{value:r,onValueChange:o,...s}=e,a=K(o);return t.jsx(ba,{scope:e.__scopeMenu,value:r,onValueChange:a,children:t.jsx(jt,{...s,ref:n})})});Un.displayName=Hn;var Vn="MenuRadioItem",Kn=d.forwardRef((e,n)=>{const{value:r,...o}=e,s=wa(Vn,e.__scopeMenu),a=r===s.value;return t.jsx(Yn,{scope:e.__scopeMenu,checked:a,children:t.jsx(Ge,{role:"menuitemradio","aria-checked":a,...o,ref:n,"data-state":Ct(a),onSelect:b(o.onSelect,()=>s.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});Kn.displayName=Vn;var yt="MenuItemIndicator",[Yn,ja]=ne(yt,{checked:!1}),$n=d.forwardRef((e,n)=>{const{__scopeMenu:r,forceMount:o,...s}=e,a=ja(yt,r);return t.jsx(B,{present:o||Ee(a.checked)||a.checked===!0,children:t.jsx(R.span,{...s,ref:n,"data-state":Ct(a.checked)})})});$n.displayName=yt;var ya="MenuSeparator",Wn=d.forwardRef((e,n)=>{const{__scopeMenu:r,...o}=e;return t.jsx(R.div,{role:"separator","aria-orientation":"horizontal",...o,ref:n})});Wn.displayName=ya;var Ca="MenuArrow",qn=d.forwardRef((e,n)=>{const{__scopeMenu:r,...o}=e,s=ze(r);return t.jsx(po,{...s,...o,ref:n})});qn.displayName=Ca;var Da="MenuSub",[Uc,Xn]=ne(Da),he="MenuSubTrigger",Jn=d.forwardRef((e,n)=>{const r=re(he,e.__scopeMenu),o=ye(he,e.__scopeMenu),s=Xn(he,e.__scopeMenu),a=bt(he,e.__scopeMenu),i=d.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=a,f={__scopeMenu:e.__scopeMenu},u=d.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return d.useEffect(()=>u,[u]),d.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),l(null)}},[c,l]),t.jsx(gt,{asChild:!0,...f,children:t.jsx(zn,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":er(r.open),...e,ref:en(n,s.onTriggerChange),onClick:p=>{e.onClick?.(p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:b(e.onPointerMove,ge(p=>{a.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:b(e.onPointerLeave,ge(p=>{u();const h=r.content?.getBoundingClientRect();if(h){const x=r.content?.dataset.side,m=x==="right",w=m?-5:5,g=h[m?"left":"right"],C=h[m?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:g,y:h.top},{x:C,y:h.top},{x:C,y:h.bottom},{x:g,y:h.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:b(e.onKeyDown,p=>{const h=a.searchRef.current!=="";e.disabled||h&&p.key===" "||oa[o.dir].includes(p.key)&&(r.onOpenChange(!0),r.content?.focus(),p.preventDefault())})})})});Jn.displayName=he;var Qn="MenuSubContent",Zn=d.forwardRef((e,n)=>{const r=On(F,e.__scopeMenu),{forceMount:o=r.forceMount,...s}=e,a=re(F,e.__scopeMenu),i=ye(F,e.__scopeMenu),c=Xn(Qn,e.__scopeMenu),l=d.useRef(null),f=T(n,l);return t.jsx(me.Provider,{scope:e.__scopeMenu,children:t.jsx(B,{present:o||a.open,children:t.jsx(me.Slot,{scope:e.__scopeMenu,children:t.jsx(wt,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:f,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{i.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:b(e.onFocusOutside,u=>{u.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:b(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:b(e.onKeyDown,u=>{const p=u.currentTarget.contains(u.target),h=sa[i.dir].includes(u.key);p&&h&&(a.onOpenChange(!1),c.trigger?.focus(),u.preventDefault())})})})})})});Zn.displayName=Qn;function er(e){return e?"open":"closed"}function Ee(e){return e==="indeterminate"}function Ct(e){return Ee(e)?"indeterminate":e?"checked":"unchecked"}function Ia(e){const n=document.activeElement;for(const r of e)if(r===n||(r.focus(),document.activeElement!==n))return}function Aa(e,n){return e.map((r,o)=>e[(n+o)%e.length])}function Na(e,n,r){const s=n.length>1&&Array.from(n).every(f=>f===n[0])?n[0]:n,a=r?e.indexOf(r):-1;let i=Aa(e,Math.max(a,0));s.length===1&&(i=i.filter(f=>f!==r));const l=i.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function Sa(e,n){const{x:r,y:o}=e;let s=!1;for(let a=0,i=n.length-1;a<n.length;i=a++){const c=n[a],l=n[i],f=c.x,u=c.y,p=l.x,h=l.y;u>o!=h>o&&r<(p-f)*(o-u)/(h-u)+f&&(s=!s)}return s}function Pa(e,n){if(!n)return!1;const r={x:e.clientX,y:e.clientY};return Sa(r,n)}function ge(e){return n=>n.pointerType==="mouse"?e(n):void 0}var Ra=kn,Ea=gt,Ma=Ln,Ta=Fn,_a=jt,ka=Bn,Oa=Ge,La=Gn,Fa=Un,Ba=Kn,za=$n,Ga=Wn,Ha=qn,Ua=Jn,Va=Zn,He="DropdownMenu",[Ka]=le(He,[Tn]),_=Tn(),[Ya,tr]=Ka(He),nr=e=>{const{__scopeDropdownMenu:n,children:r,dir:o,open:s,defaultOpen:a,onOpenChange:i,modal:c=!0}=e,l=_(n),f=d.useRef(null),[u,p]=_e({prop:s,defaultProp:a??!1,onChange:i,caller:He});return t.jsx(Ya,{scope:n,triggerId:Z(),triggerRef:f,contentId:Z(),open:u,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(h=>!h),[p]),modal:c,children:t.jsx(Ra,{...l,open:u,onOpenChange:p,dir:o,modal:c,children:r})})};nr.displayName=He;var rr="DropdownMenuTrigger",or=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,disabled:o=!1,...s}=e,a=tr(rr,r),i=_(r);return t.jsx(Ea,{asChild:!0,...i,children:t.jsx(R.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:en(n,a.triggerRef),onPointerDown:b(e.onPointerDown,c=>{!o&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:b(e.onKeyDown,c=>{o||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});or.displayName=rr;var $a="DropdownMenuPortal",sr=e=>{const{__scopeDropdownMenu:n,...r}=e,o=_(n);return t.jsx(Ma,{...o,...r})};sr.displayName=$a;var ar="DropdownMenuContent",ir=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=tr(ar,r),a=_(r),i=d.useRef(!1);return t.jsx(Ta,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...o,ref:n,onCloseAutoFocus:b(e.onCloseAutoFocus,c=>{i.current||s.triggerRef.current?.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:b(e.onInteractOutside,c=>{const l=c.detail.originalEvent,f=l.button===0&&l.ctrlKey===!0,u=l.button===2||f;(!s.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ir.displayName=ar;var Wa="DropdownMenuGroup",cr=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(_a,{...s,...o,ref:n})});cr.displayName=Wa;var qa="DropdownMenuLabel",Xa=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(ka,{...s,...o,ref:n})});Xa.displayName=qa;var Ja="DropdownMenuItem",lr=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(Oa,{...s,...o,ref:n})});lr.displayName=Ja;var Qa="DropdownMenuCheckboxItem",Za=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(La,{...s,...o,ref:n})});Za.displayName=Qa;var ei="DropdownMenuRadioGroup",ti=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(Fa,{...s,...o,ref:n})});ti.displayName=ei;var ni="DropdownMenuRadioItem",ri=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(Ba,{...s,...o,ref:n})});ri.displayName=ni;var oi="DropdownMenuItemIndicator",si=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(za,{...s,...o,ref:n})});si.displayName=oi;var ai="DropdownMenuSeparator",ii=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(Ga,{...s,...o,ref:n})});ii.displayName=ai;var ci="DropdownMenuArrow",li=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(Ha,{...s,...o,ref:n})});li.displayName=ci;var di="DropdownMenuSubTrigger",ui=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(Ua,{...s,...o,ref:n})});ui.displayName=di;var fi="DropdownMenuSubContent",pi=d.forwardRef((e,n)=>{const{__scopeDropdownMenu:r,...o}=e,s=_(r);return t.jsx(Va,{...s,...o,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pi.displayName=fi;var hi=nr,xi=or,mi=sr,gi=ir,vi=cr,bi=lr;function wi({...e}){return t.jsx(hi,{"data-slot":"dropdown-menu",...e})}function ji({...e}){return t.jsx(xi,{"data-slot":"dropdown-menu-trigger",...e})}function yi({className:e,sideOffset:n=4,...r}){return t.jsx(mi,{children:t.jsx(gi,{"data-slot":"dropdown-menu-content",sideOffset:n,className:v("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-xs border p-1 shadow-md","ring ring-black",e),...r})})}function Ci({...e}){return t.jsx(vi,{"data-slot":"dropdown-menu-group",...e})}function Di({className:e,inset:n,variant:r="default",...o}){return t.jsx(bi,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":r,className:v("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o})}function nt({value:e,variant:n="secondary",size:r="xs",className:o,children:s,...a}){return t.jsxs(G,{variant:n,size:r,className:v("text-muted-foreground hover:bg-ring/50 hover:text-foreground/70 border border-white/5 ring ring-black/30",{"!opacity-100":!!e},o),...a,children:[s,!a.disabled&&t.jsx(ho,{})]})}function rt({placeholder:e,disabled:n,options:r,onValueChange:o,...s}){const a=H(),i=r.find(l=>l.ID===s.value),c=r.filter(l=>l.ID!==s.value);return d.useEffect(()=>{r.length===1&&!i&&!n&&o(r[0].ID)},[r.length,n]),t.jsxs(wi,{children:[t.jsx(ji,{asChild:!0,children:t.jsx(nt,{className:v("data-[state=open]:text-foreground",{"text-foreground hover:text-foreground":i,"bg-slate-700 hover:bg-slate-700/80":i?.playerID===a,"bg-stone-700 hover:bg-stone-700/80":i&&i?.playerID!==a}),value:i?.ID,disabled:n||c.length===0,children:i?.name||e})}),t.jsx(yi,{children:t.jsx(Ci,{children:c.map(l=>t.jsx(Di,{className:v({"dark:hover:bg-slate-800 border border-transparent hover:border-slate-700":l.playerID===a,"dark:hover:bg-stone-800":l.playerID&&l.playerID!==a}),onSelect:()=>o(l.ID),children:l.name},l.ID))})})]})}function Ii({className:e,disabled:n,...r}){return t.jsx(mo,{className:v("h-8 border-none rounded-sm",{"dark:hover:bg-input":!n},e),...r})}function Ai({option:e,onConfirm:n}){const r=y(h=>h.state),[o,s]=d.useState(e.context),a=!st(e.action,r,o),i=ke(r),c=e.action.sources(r,o),l=e.action.targets.get(r,o),f=e.action.targets.max(r,o),u=e.action.targets.validate(r,o);function p(h){return l.map(x=>x.target).filter(x=>!o.targetIDs.includes(x.ID)||o.targetIDs[h]===x.ID)}return e.disable==="hide"&&a?null:t.jsxs(Ii,{className:v("group",{"opacity-50":a||i}),disabled:a||i,children:[e.icons&&t.jsx(pe,{className:v("pr-2 opacity-50 flex items-center gap-2"),children:e.icons}),c.length>0&&t.jsx(pe,{children:t.jsx(rt,{placeholder:"Source",disabled:a||i,options:c,value:o.sourceID,onValueChange:h=>s(x=>({...x,sourceID:h}))})}),t.jsx(pe,{className:v("pr-2",{"group-hover:text-foreground/70":!(a||i)}),children:e.text}),f>0&&l.length>0&&t.jsx(pe,{className:"gap-2",children:Array.from({length:f}).map((h,x)=>t.jsx(rt,{placeholder:"Target",disabled:a||i,options:p(x),value:o.targetIDs[x],onValueChange:m=>s(w=>({...w,targetIDs:[...w.targetIDs.slice(0,x),m,...w.targetIDs.slice(x+1)]}))},x))}),t.jsx("div",{className:"flex-1"}),u&&!(a||i)&&t.jsx(pe,{align:"inline-end",children:t.jsx(xo,{className:"cursor-pointer rounded-full opacity-70 hover:opacity-100",size:"icon-xs",variant:"default",onClick:()=>{n(o),s(e.context)},children:t.jsx(Go,{})})})]})}function Ni({className:e,...n}){return t.jsx(Cn,{orientation:"vertical",className:v("flex flex-col gap-0 w-full border rounded-sm ring ring-black"),...n})}function Si({messages:e}){return t.jsx("div",{children:e.map(n=>t.jsx("p",{className:"text-sm",children:n.text},n.ID))})}function Pi({className:e,...n}){return t.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:t.jsx("table",{"data-slot":"table",className:v("w-full caption-bottom text-sm",e),...n})})}function Ri({className:e,...n}){return t.jsx("thead",{"data-slot":"table-header",className:v("[&_tr]:border-b",e),...n})}function Ei({className:e,...n}){return t.jsx("tbody",{"data-slot":"table-body",className:v("[&_tr:last-child]:border-0",e),...n})}function Ot({className:e,...n}){return t.jsx("tr",{"data-slot":"table-row",className:v("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...n})}function Ae({className:e,...n}){return t.jsx("th",{"data-slot":"table-head",className:v("text-foreground/40 h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function Ne({className:e,...n}){return t.jsx("td",{"data-slot":"table-cell",className:v("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function Mi({className:e,...n}){return t.jsx("caption",{"data-slot":"table-caption",className:v("text-muted-foreground mt-4 text-sm",e),...n})}function dr({items:e,actionHeader:n,actions:r}){const o=go(e);return t.jsxs(Pi,{children:[t.jsx(Ri,{children:t.jsxs(Ot,{className:"pointer-events-none",children:[t.jsx(Ae,{}),t.jsx(Ae,{children:"Name"}),t.jsx(Ae,{children:"Description"}),t.jsx(Ae,{className:"flex items-center justify-end",children:n??t.jsx(Ko,{})})]})}),t.jsx(Ei,{children:Object.entries(o).map(([s,a])=>[e.find(i=>i.name===s),a]).map(([s,a])=>t.jsxs(Ot,{children:[t.jsx(Ne,{children:a}),t.jsx(Ne,{children:s.name}),t.jsx(Ne,{children:"The quick brown fox jumps over the lazy dog."}),t.jsx(Ne,{className:"flex justify-end gap-1",children:r(s)})]},s.ID))}),e.length===0&&t.jsx(Mi,{children:"No items available."})]})}function Ti(e){return{ID:vo(),name:"Purchase Item",priority:0,cooldown:()=>0,validate:(n,r)=>{const o=n.players.find(a=>a.ID===r.playerID),s=Et(n,n.encounter.activeNodeID,e);return!o||!s?!1:o.credits>s.value},targets:{unique:!0,max:()=>0,get:()=>[],validate:()=>!0},sources:()=>[],resolve:(n,r)=>[bo(r,e),wo(r,[jo({text:yo(Et(n,n.encounter.activeNodeID,e)," purchased.")})])]}}function _i(){const{state:e,resolveActionItem:n}=y(c=>c),r=H(),o=e.players.find(c=>c.ID===r),s=ve({playerID:r}),a=Co(e),i=ke(e);return!a||!o?null:t.jsxs(lt,{className:"flex flex-1 flex-col gap-2 justify-between",children:[t.jsx(Ks,{}),t.jsxs("div",{className:"flex flex-1 flex-col justify-between",children:[t.jsx(Si,{messages:a.messages(e,s)}),a.type==="shop"&&t.jsx(dr,{items:a.items,actionHeader:t.jsxs(t.Fragment,{children:["Buy (",o.credits," ",t.jsx(Ze,{}),")"]}),actions:c=>{const l=Ti(c.ID);return t.jsxs(G,{size:"xs",variant:"secondary",className:"cursor-pointer",disabled:i||!st(l,e,s),onClick:()=>n(l,s),children:[c.value,t.jsx(Ze,{className:"opacity-40"})]})}}),t.jsx(Ni,{children:a.options(e,s).map((c,l)=>t.jsx(Ai,{index:l+1,option:c,onConfirm:f=>{const u=Do(c,f);n(u.action,u.context)}},c.ID))})]})]})}function ki(){const{state:e}=y(n=>n);if(!e.combat)return t.jsx(Oi,{})}function Oi(){const e=y(o=>o.state),n=y(o=>o.next),r=ke(e);return d.useEffect(()=>{if(!r)return;const o=setInterval(()=>{n()},100);return()=>clearInterval(o)},[r]),null}function Li({className:e,...n}){return t.jsx(ct,{className:v("h-152 w-172 gap-3",e),transition:{duration:.4},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},...n})}function Fi(){const{state:e}=y(a=>a),o=!(e.combat?.phase==="planning")&&ke(e),s=Object.values(e.pastEncounters).filter(a=>a.ID!==e.encounter.ID);return d.useEffect(()=>{},[e]),t.jsxs(t.Fragment,{children:[t.jsx(ki,{}),t.jsx(Dn,{children:t.jsx(de,{mode:"wait",onExitComplete:()=>{},children:t.jsxs(Li,{className:"gap-0 relative",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"h-10 -mt-6 -ml-4 relative",children:[t.jsx("div",{className:"triangle border-t-yellow-950/50 absolute -bottom-4 left-0 z-0"}),t.jsx(q,{className:"px-8 title text-2xl bg-yellow-950 border border-yellow-900/50 leading-10 relative text-shadow-xl shadow-xl z-10 ring ring-black",children:e.encounter.name})]}),t.jsx(Ht,{className:"absolute top-2 right-2 z-30",children:s.length>0&&t.jsx(G,{variant:"ghost",disabled:o,children:t.jsx("span",{className:"text-muted-foreground",children:"Travel"})})})]}),t.jsx(_i,{})]},e.encounter.ID)})})]})}const Bi="/bmt-cmbt/assets/lion-cAn-bMF4.png",zi="/bmt-cmbt/assets/girl_11-C8-VbRlt.png",Gi="data:image/png;base64,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",Hi="/bmt-cmbt/assets/pup-gIn9Yy0-.png",Ui="/bmt-cmbt/assets/wizard_2-CJQC9mQN.png",Vi="/bmt-cmbt/assets/woman_1-BVnvMsHM.png",Ki="/bmt-cmbt/assets/woman_54-UNb_lsos.png",Yi={lion:Bi,lumberjack_2:Gi,pup:Hi,wizard_2:Ui,woman_1:Vi,woman_54:Ki,girl_11:zi};function $i({className:e,...n}){return t.jsx("div",{className:v("relative h-6 bg-black/60 ring ring-black",e),style:{borderStyle:"inset"},...n})}function Wi({children:e,value:n,...r}){const[o,s]=Rt.useState(n);return Rt.useEffect(()=>{const a=setTimeout(()=>s(n),700);return()=>clearTimeout(a)},[n]),t.jsxs($i,{...r,children:[t.jsx(X.div,{className:"bg-red-800/80 absolute top-0 h-full border border-white/20 z-10 ring ring-black",initial:{width:`${n}%`},animate:{width:`${n}%`}}),t.jsx(X.div,{className:"bg-white/80 absolute top-0 h-full border border-white/20 z-0 ring ring-black",initial:{width:`${o}%`},animate:{width:`${o}%`}}),t.jsx("div",{className:"absolute inset-0 flex flex-row justify-end inset",children:e})]})}function ur({className:e,showHealthNumbers:n,health:r,maxHealth:o,children:s,...a}){const i=o===0?0:r*100/o,[c,l]=d.useState(i);return d.useEffect(()=>{const f=setTimeout(()=>l(i),700);return()=>clearTimeout(f)},[i]),t.jsx(Wi,{value:i,children:n&&t.jsx("div",{className:"absolute top-0.5 right-1 z-10 leading-4 title text-lg text-foreground text-shadow-md",children:s||t.jsxs(t.Fragment,{children:[Math.max(r,0),"/",o]})})})}function qi({actor:e,...n}){const r=y(a=>a.state),o=y(a=>a.filterAction),s=r.actionQueue.find(a=>a.context.sourceID===e.ID);return s?t.jsx(G,{size:"icon-xs",variant:"destructive",onClick:()=>o(s.context.sourceID),...n,children:t.jsx(cn,{className:"size-4"})}):null}const Xi=it("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function W({className:e,variant:n,asChild:r=!1,...o}){const s=r?Io:"span";return t.jsx(s,{"data-slot":"badge",className:v(Xi({variant:n}),e),...o})}function fr({count:e,effectID:n,...r}){const o=No[n];return t.jsx(Ao,{effectID:n,side:"bottom",asChild:!0,...r,children:t.jsxs(W,{variant:"outline",className:"bg-background border-input hover:border-ring text-muted-foreground p-1 [&>svg]:size-4 ring ring-black rounded-xs",children:[o?t.jsx(o.Icon,{}):t.jsx(So,{}),e>1?`(${e})`:""]})})}const Ji=it("flex disabled:pointer-events-none outline-none p-1 px-2 rounded-sm transition-all border border-transparent",{variants:{variant:{ally:"rounded-tl-xl! bg-slate-700 hover:bg-slate-700/80 text-foreground border-slate-600! ring ring-black","ally-active":"bg-slate-300 text-slate-950 border border-white ring ring-black",enemy:"bg-transparent","enemy-active":"bg-stone-300 text-stone-950 ring ring-black",targeted:"bg-red-400/40 text-white ring ring-black"},defaultVariants:{variant:"ally"}}});function pr({className:e,variant:n,...r}){return t.jsx(X.button,{className:Ji({variant:n,className:e}),...r})}function Qi({actorID:e,active:n,targeted:r,disabled:o,status:s,onClick:a,...i}){const c=y(g=>g.state),{setActorPosition:l}=z(g=>({hoverActorID:g.hoverActorID,setActorPosition:g.setActorPosition})),f=d.useRef(null);d.useLayoutEffect(()=>{if(f.current){const g=f.current.getBoundingClientRect();l(e,{x:g.left,y:g.top,width:g.width,height:g.height})}},[e,l,window.innerHeight,window.innerWidth]);const[u,p]=d.useState(0),h=J(c,e),[x,m]=tn(h),w=h.state.alive?x:0;return o=o||h.state.stunned===1,t.jsxs(X.div,{ref:f,initial:{y:"100%",opacity:0},animate:{y:"0%",opacity:1},exit:{y:"100%",opacity:0},className:"group flex flex-col justify-end w-64 absolute bottom-0","data-state":u>0?"open":"closed",...i,children:[t.jsx("div",{className:"flex transition-all justify-between h-6 translate-y-2 group-hover:-translate-y-1.5 group-data-[state=open]:-translate-y-1.5 z-10",children:t.jsx("div",{className:"flex -space-x-3 group-hover:space-x-1 group-data-[state=open]:space-x-1 transition-all flex-wrap",children:t.jsx(de,{children:Object.entries(h.applied).map(([g,C])=>t.jsx(X.div,{layout:!0,initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},children:t.jsx(fr,{effectID:g,count:C,side:"top",onOpenChange:S=>{p(N=>N+(S?1:-1))}})},g))})})}),c.combat?.phase==="planning"&&t.jsx(qi,{actor:h,className:"absolute top-8 right-2"}),t.jsxs(pr,{variant:r?"targeted":n?"ally-active":"ally",disabled:o,onClick:()=>a(h),className:v("flex pl-10 relative",{"opacity-50":o&&!n}),children:[t.jsx("div",{className:"absolute -left-8 -top-3 size-25 overflow-hidden z-0",children:t.jsx("img",{src:Yi[h.image],className:"actor-portrait"})}),t.jsx(W,{className:"absolute -left-2 -bottom-2 bg-slate-900 border-slate-700 rounded-xs ring ring-black",variant:"outline",children:"9999"}),t.jsx("div",{className:"flex-1 z-10",children:t.jsxs(nn,{className:"gap-0",children:[t.jsx(rn,{className:"text-xl title pl-4 shadow-xl",children:h.name}),t.jsx(ur,{showHealthNumbers:!0,health:w,maxHealth:m,className:"-mt-0.5 h-6",children:x<=0&&h.state.alive&&t.jsx("span",{className:"text-destructive-foreground uppercase",children:"Death's Door"})}),t.jsx("span",{className:"text-xs h-4",children:"resource bars here"})]})})]})]})}function Zi({actorID:e,active:n,targeted:r,...o}){const s=y(m=>m.state),{hoverActorID:a,setActorPosition:i}=z(m=>({hoverActorID:m.hoverActorID,setActorPosition:m.setActorPosition})),c=d.useRef(null);d.useLayoutEffect(()=>{if(c.current){const m=c.current.getBoundingClientRect();i(e,{x:m.left,y:m.top,width:m.width,height:m.height})}},[e,i]),r=r||a===e;const l=J(s,e),[f,u]=tn(l),p=l.state.alive?f:0,[h,x]=d.useState(0);return t.jsxs(X.div,{ref:c,initial:{y:"-100%",opacity:0},animate:{y:"0%",opacity:1},exit:{y:"-100%",opacity:0},className:"group flex flex-col w-48 h-14 absolute top-0","data-state":h>0?"open":"closed",...o,children:[t.jsx(pr,{variant:r?"targeted":n?"enemy-active":"enemy",className:"h-14 py-1 px-2 pointer-events-none border border-stone-950",children:t.jsxs(nn,{className:"gap-0",children:[t.jsx(rn,{className:"text-base title",children:l.name}),t.jsx(ur,{showHealthNumbers:!1,health:p,maxHealth:u})]})}),t.jsx("div",{className:"flex transition-all justify-between h-6 -translate-y-2 group-hover:translate-y-1 group-data-[state=open]:translate-y-1 z-10",children:t.jsx("div",{className:"flex -space-x-3 group-hover:space-x-1 group-data-[state=open]:space-x-1 transition-all flex-wrap",children:t.jsx(de,{children:Object.entries(l.applied).map(([m,w])=>t.jsx(X.div,{layout:!0,initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},children:t.jsx(fr,{effectID:m,count:w,onOpenChange:g=>{x(C=>C+(g?1:-1))}})},m))})})})]})}function ec({encounter:e,current:n}){const r=y(l=>l.state),o=r.actors.filter(l=>l.playerID===e?.ID),s=o.filter(l=>l.state.alive),a=y(l=>l.state.combat?.phase),i=a==="planning",c=!!a&&a!=="pre"&&a!=="post";return t.jsxs("div",{className:"w-full flex flex-row justify-end items-start h-20 max-w-[1440px] px-4 gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-0 items-end mt-3",children:[t.jsx("div",{className:"grid grid-cols-3 gap-1 text-stone-300/40",children:o.map(l=>l.state.alive?t.jsx(on,{},l.ID):t.jsx(sn,{},l.ID))}),s.length>0&&t.jsxs("div",{className:"text-lg text-muted-foreground/50 title",children:[s.length," enemies left"]})]}),e?.activeActorIDs.map((l,f)=>t.jsxs("div",{className:"relative h-20 w-48",children:[t.jsx("div",{className:v("rounded bg-background opacity-40 z-0 transition-all","h-14 w-full mb-6 flex items-center justify-center border border-foreground/10 border-dashed text-stone-300/30",{"opacity-0":!!l})}),t.jsx(de,{children:l&&t.jsx(Zi,{actorID:l,active:c&&!i&&r.promptQueue.length===0&&n?.context.sourceID===l,targeted:ln(r,n?.context,l,an(e.ID,f))},l)})]},f))]})}function tc({player:e,current:n}){const r=y(l=>l.state),{activeActorID:o,set:s}=z(l=>l),a=r.combat?.phase,i=a==="planning",c=!!a&&a!=="pre"&&a!=="post";return t.jsx("div",{className:"flex items-end justify-end gap-8 overflow-y-clip pb-2",children:e.activeActorIDs.map((l,f)=>t.jsxs("div",{className:"relative w-64 h-32 flex flex-col justify-end",children:[t.jsx("div",{className:v("rounded-xs h-19 mt-8 w-64 transition-all"," bg-background/60 border border-background/80",{"opacity-0":!!l})}),t.jsx(de,{children:l&&t.jsx(Qi,{actorID:l,status:i?"select action":"...",active:c&&(i&&o===l||!i&&n?.context.sourceID===l),targeted:ln(r,n?.context,l,an(e.ID,f)),disabled:!i||!!r.actionQueue.find(u=>u.context.sourceID===l),onClick:u=>{s({activeActionID:Po(u,r)?.ID,activeActorID:u.ID})}},l)})]},f))})}function nc({className:e,...n}){const r=y(s=>s.state.combatLog),o=d.useRef(null);return d.useEffect(()=>{o.current&&o.current.scrollIntoView({behavior:"smooth"})},[r.length]),t.jsx(xt,{className:v("h-100 text-sm",e),...n,children:t.jsxs("ul",{className:"text-muted-foreground",children:[r.map((s,a)=>t.jsx("li",{style:{opacity:s.depth>0?.7:1,paddingLeft:s.depth*16},children:s.text},a)),t.jsx("div",{ref:o})]})})}var Ue="Tabs",[rc]=le(Ue,[Be]),hr=Be(),[oc,Dt]=rc(Ue),xr=d.forwardRef((e,n)=>{const{__scopeTabs:r,value:o,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:c,activationMode:l="automatic",...f}=e,u=Te(c),[p,h]=_e({prop:o,onChange:s,defaultProp:a??"",caller:Ue});return t.jsx(oc,{scope:r,baseId:Z(),value:p,onValueChange:h,orientation:i,dir:u,activationMode:l,children:t.jsx(R.div,{dir:u,"data-orientation":i,...f,ref:n})})});xr.displayName=Ue;var mr="TabsList",gr=d.forwardRef((e,n)=>{const{__scopeTabs:r,loop:o=!0,...s}=e,a=Dt(mr,r),i=hr(r);return t.jsx(Rn,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:o,children:t.jsx(R.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:n})})});gr.displayName=mr;var vr="TabsTrigger",br=d.forwardRef((e,n)=>{const{__scopeTabs:r,value:o,disabled:s=!1,...a}=e,i=Dt(vr,r),c=hr(r),l=yr(i.baseId,o),f=Cr(i.baseId,o),u=o===i.value;return t.jsx(En,{asChild:!0,...c,focusable:!s,active:u,children:t.jsx(R.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":f,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:n,onMouseDown:b(e.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?i.onValueChange(o):p.preventDefault()}),onKeyDown:b(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&i.onValueChange(o)}),onFocus:b(e.onFocus,()=>{const p=i.activationMode!=="manual";!u&&!s&&p&&i.onValueChange(o)})})})});br.displayName=vr;var wr="TabsContent",jr=d.forwardRef((e,n)=>{const{__scopeTabs:r,value:o,forceMount:s,children:a,...i}=e,c=Dt(wr,r),l=yr(c.baseId,o),f=Cr(c.baseId,o),u=o===c.value,p=d.useRef(u);return d.useEffect(()=>{const h=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(h)},[]),t.jsx(B,{present:s||u,children:({present:h})=>t.jsx(R.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:f,tabIndex:0,...i,ref:n,style:{...e.style,animationDuration:p.current?"0s":void 0},children:h&&a})})});jr.displayName=wr;function yr(e,n){return`${e}-trigger-${n}`}function Cr(e,n){return`${e}-content-${n}`}var sc=xr,ac=gr,ic=br,cc=jr;function lc({className:e,...n}){return t.jsx(sc,{"data-slot":"tabs",className:v("flex flex-col gap-2",e),...n})}function dc({className:e,...n}){return t.jsx(ac,{"data-slot":"tabs-list",className:v("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...n})}function Lt({className:e,...n}){return t.jsx(ic,{"data-slot":"tabs-trigger",className:v("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-foreground/20 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function Ft({className:e,...n}){return t.jsx(cc,{"data-slot":"tabs-content",className:v("flex-1 outline-none",e),...n})}function uc(e){return dt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 12v-1h9v1H1zm0-5h14v1H1V7zm11-4v1H1V3h11z"},child:[]}]})(e)}function fc(e){return dt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 10C14.2091 10 16 8.20914 16 6 16 3.79086 14.2091 2 12 2 9.79086 2 8 3.79086 8 6 8 8.20914 9.79086 10 12 10ZM5.5 13C6.88071 13 8 11.8807 8 10.5 8 9.11929 6.88071 8 5.5 8 4.11929 8 3 9.11929 3 10.5 3 11.8807 4.11929 13 5.5 13ZM21 10.5C21 11.8807 19.8807 13 18.5 13 17.1193 13 16 11.8807 16 10.5 16 9.11929 17.1193 8 18.5 8 19.8807 8 21 9.11929 21 10.5ZM12 11C14.7614 11 17 13.2386 17 16V22H7V16C7 13.2386 9.23858 11 12 11ZM5 15.9999C5 15.307 5.10067 14.6376 5.28818 14.0056L5.11864 14.0204C3.36503 14.2104 2 15.6958 2 17.4999V21.9999H5V15.9999ZM22 21.9999V17.4999C22 15.6378 20.5459 14.1153 18.7118 14.0056 18.8993 14.6376 19 15.307 19 15.9999V21.9999H22Z"},child:[]}]})(e)}function pc(e){return dt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0a2 2 0 0 0-2 2H3.5a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h4v.5a.5.5 0 0 0 1 0V7h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H10a2 2 0 0 0-2-2m1 2a1 1 0 0 0-2 0zm-4 9v2h6v-2h-1v.5a.5.5 0 0 1-1 0V11z"},child:[]},{tag:"path",attr:{d:"M14 7.599A3 3 0 0 1 12.5 8H9.415a1.5 1.5 0 0 1-2.83 0H3.5A3 3 0 0 1 2 7.599V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM4 10.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5z"},child:[]}]})(e)}var Ve="Dialog",[Dr]=le(Ve),[hc,V]=Dr(Ve),ot=e=>{const{__scopeDialog:n,children:r,open:o,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,c=d.useRef(null),l=d.useRef(null),[f,u]=_e({prop:o,defaultProp:s??!1,onChange:a,caller:Ve});return t.jsx(hc,{scope:n,triggerRef:c,contentRef:l,contentId:Z(),titleId:Z(),descriptionId:Z(),open:f,onOpenChange:u,onOpenToggle:d.useCallback(()=>u(p=>!p),[u]),modal:i,children:r})};ot.displayName=Ve;var Ir="DialogTrigger",Ar=d.forwardRef((e,n)=>{const{__scopeDialog:r,...o}=e,s=V(Ir,r),a=T(n,s.triggerRef);return t.jsx(R.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Nt(s.open),...o,ref:a,onClick:b(e.onClick,s.onOpenToggle)})});Ar.displayName=Ir;var It="DialogPortal",[xc,Nr]=Dr(It,{forceMount:void 0}),Sr=e=>{const{__scopeDialog:n,forceMount:r,children:o,container:s}=e,a=V(It,n);return t.jsx(xc,{scope:n,forceMount:r,children:d.Children.map(o,i=>t.jsx(B,{present:r||a.open,children:t.jsx($t,{asChild:!0,container:s,children:i})}))})};Sr.displayName=It;var Me="DialogOverlay",Pr=d.forwardRef((e,n)=>{const r=Nr(Me,e.__scopeDialog),{forceMount:o=r.forceMount,...s}=e,a=V(Me,e.__scopeDialog);return a.modal?t.jsx(B,{present:o||a.open,children:t.jsx(gc,{...s,ref:n})}):null});Pr.displayName=Me;var mc=Jt("DialogOverlay.RemoveScroll"),gc=d.forwardRef((e,n)=>{const{__scopeDialog:r,...o}=e,s=V(Me,r);return t.jsx(Xt,{as:mc,allowPinchZoom:!0,shards:[s.contentRef],children:t.jsx(R.div,{"data-state":Nt(s.open),...o,ref:n,style:{pointerEvents:"auto",...o.style}})})}),ee="DialogContent",Rr=d.forwardRef((e,n)=>{const r=Nr(ee,e.__scopeDialog),{forceMount:o=r.forceMount,...s}=e,a=V(ee,e.__scopeDialog);return t.jsx(B,{present:o||a.open,children:a.modal?t.jsx(vc,{...s,ref:n}):t.jsx(bc,{...s,ref:n})})});Rr.displayName=ee;var vc=d.forwardRef((e,n)=>{const r=V(ee,e.__scopeDialog),o=d.useRef(null),s=T(n,r.contentRef,o);return d.useEffect(()=>{const a=o.current;if(a)return Wt(a)},[]),t.jsx(Er,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:b(e.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:b(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&a.preventDefault()}),onFocusOutside:b(e.onFocusOutside,a=>a.preventDefault())})}),bc=d.forwardRef((e,n)=>{const r=V(ee,e.__scopeDialog),o=d.useRef(!1),s=d.useRef(!1);return t.jsx(Er,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(o.current||r.triggerRef.current?.focus(),a.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(o.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;r.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Er=d.forwardRef((e,n)=>{const{__scopeDialog:r,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,c=V(ee,r),l=d.useRef(null),f=T(n,l);return qt(),t.jsxs(t.Fragment,{children:[t.jsx(Qt,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:a,children:t.jsx(Zt,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Nt(c.open),...i,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(jc,{titleId:c.titleId}),t.jsx(Cc,{contentRef:l,descriptionId:c.descriptionId})]})]})}),At="DialogTitle",Mr=d.forwardRef((e,n)=>{const{__scopeDialog:r,...o}=e,s=V(At,r);return t.jsx(R.h2,{id:s.titleId,...o,ref:n})});Mr.displayName=At;var Tr="DialogDescription",wc=d.forwardRef((e,n)=>{const{__scopeDialog:r,...o}=e,s=V(Tr,r);return t.jsx(R.p,{id:s.descriptionId,...o,ref:n})});wc.displayName=Tr;var _r="DialogClose",kr=d.forwardRef((e,n)=>{const{__scopeDialog:r,...o}=e,s=V(_r,r);return t.jsx(R.button,{type:"button",...o,ref:n,onClick:b(e.onClick,()=>s.onOpenChange(!1))})});kr.displayName=_r;function Nt(e){return e?"open":"closed"}var Or="DialogTitleWarning",[Vc,Lr]=Ro(Or,{contentName:ee,titleName:At,docsSlug:"dialog"}),jc=({titleId:e})=>{const n=Lr(Or),r=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},yc="DialogDescriptionWarning",Cc=({contentRef:e,descriptionId:n})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Lr(yc).contentName}}.`;return d.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");n&&s&&(document.getElementById(n)||console.warn(o))},[o,e,n]),null},Dc=Ar,Ic=Sr,Ac=Pr,Nc=Rr,Sc=Mr,Pc=kr;function Bt({...e}){return t.jsx(Dc,{"data-slot":"dialog-trigger",...e})}function Rc({...e}){return t.jsx(Ic,{"data-slot":"dialog-portal",...e})}function Ec({className:e,...n}){return t.jsx(Ac,{"data-slot":"dialog-overlay",className:v("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...n})}function Fr({className:e,children:n,showCloseButton:r=!0,...o}){return t.jsxs(Rc,{"data-slot":"dialog-portal",children:[t.jsx(Ec,{}),t.jsxs(Nc,{"data-slot":"dialog-content",className:v("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-xs border p-6 shadow-lg duration-200 sm:max-w-lg","ring ring-black",e),...o,children:[n,r&&t.jsxs(Pc,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(cn,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Br({className:e,...n}){return t.jsx("div",{"data-slot":"dialog-header",className:v("flex flex-col gap-2 text-center sm:text-left",e),...n})}function zr({className:e,...n}){return t.jsx(Sc,{"data-slot":"dialog-title",className:v("text-2xl leading-none font-semibold title",e),...n})}function Mc({actor:e}){return t.jsx(Fr,{children:t.jsx(Br,{children:t.jsx(zr,{children:e.name})})})}function Tc({onOpenChange:e}){const n=y(a=>a.state),r=H(),o=n.players.find(a=>a.ID===r),s=ve({playerID:r});return o?t.jsxs(Fr,{className:"w-180 !max-w-180",children:[t.jsx(Br,{children:t.jsx(zr,{children:"Items"})}),t.jsx(dr,{items:o.items,actionHeader:t.jsx(t.Fragment,{children:"Equip/Use"}),actions:a=>t.jsxs(t.Fragment,{children:[a.use&&t.jsx(nt,{children:"Use"}),a.consumable&&t.jsx(rt,{disabled:!1,placeholder:"Use",options:a.consumable.targets.get(n,s).map(i=>i.target),value:void 0,onValueChange:()=>{e?.(!1)}}),a.actions&&t.jsx(nt,{children:"Equip"})]})})]}):null}const _c=[Mo,To,_o];function kc({player:e,current:n}){const{state:r}=y(l=>l),{activePlayerTab:o,set:s}=z(l=>l),a=r.actors.filter(l=>l.playerID===e.ID),[i,c]=d.useState(!1);return t.jsxs("div",{className:"flex justify-start gap-6 mb-3 w-full max-w-[1440px]",children:[t.jsxs("div",{children:[t.jsx(tc,{player:e,current:n}),t.jsxs("div",{className:"flex items-center justify-center text-center title text-lg h-5 leading-5 text-muted-foreground gap-6 px-3 mt-1",children:[t.jsx(xe,{className:"flex-1"}),"Active Party",t.jsx(xe,{className:"flex-1"})]})]}),t.jsxs(lc,{orientation:"vertical",className:"flex-row items-center rounded-xs gap-1",value:o,onValueChange:l=>s({activePlayerTab:l}),children:[t.jsxs(dc,{className:"flex flex-col items-center justify-around bg-transparent h-full gap-2",children:[t.jsx(Lt,{value:"combat-log",className:"bg-muted rounded-sm ring border !border-foreground/10 ring-black hover:bg-ring/50",children:t.jsx(uc,{})}),t.jsx(Lt,{value:"party",className:"bg-muted rounded-sm ring border !border-foreground/10 ring-black hover:bg-ring/50",children:t.jsx(fc,{})}),t.jsx("div",{className:"flex-1"}),t.jsxs(ot,{open:i,onOpenChange:c,children:[t.jsx(Bt,{className:"px-2 py-1.5 bg-muted text-muted-foreground rounded-sm ring border !border-foreground/10 ring-black hover:bg-ring/50",children:t.jsx(pc,{})}),t.jsx(Tc,{open:i,onOpenChange:c})]})]}),t.jsxs("div",{className:"relative h-32 w-62 xl:w-80",children:[t.jsx(Ft,{value:"combat-log",className:"h-full",children:t.jsx(nc,{className:"h-full w-full rounded-xs p-2 bg-background/60 border ring ring-black text-xs"})}),t.jsx(Ft,{value:"party",className:"h-full",children:t.jsxs("div",{className:"grid grid-cols-2 grid-rows-3 h-full gap-1",children:[a.map(l=>{const f=Eo(r,l.ID),u=at(r,l.ID),p=_c[u?.index??-1]??on;return t.jsxs(ot,{children:[t.jsx(Bt,{asChild:!0,children:t.jsxs(G,{className:v("!rounded-sm justify-baseline",{"opacity-50 hover:opacity-90 h-full":!l.state.alive||!0}),variant:l.state.alive?"slate":"destructive",children:[f?t.jsx(p,{}):l.state.alive?t.jsx(ko,{}):t.jsx(sn,{}),l.name]})}),t.jsx(Mc,{actor:l})]},l.ID)}),Array.from({length:6-a.length}).map((l,f)=>t.jsx("div",{className:"h-full w-full bg-black/20"},f))]})})]})]})]})}const Oc=["pre","start","planning","main","end","post"];function Lc(){const e=y(o=>o.state),n=y(o=>o.nextPhase),r=Oo();return t.jsxs(t.Fragment,{children:[t.jsxs(W,{variant:"secondary",children:["Turn ",e.combat?.turn]}),t.jsx(xe,{orientation:"vertical"}),Oc.filter(o=>o!=="pre"&&o!=="post").map(o=>t.jsx(W,{variant:o===r?"secondary":"outline",className:v({"text-muted-foreground":o!==r}),children:o},o)),t.jsx(xe,{orientation:"vertical"}),t.jsx(W,{onClick:()=>n(),children:t.jsx(Lo,{})})]})}function Fc({className:e,...n}){return t.jsx($o,{role:"status","aria-label":"Loading",className:v("size-4 animate-spin",e),...n})}function Bc(){const e=y(n=>n.state);return t.jsxs("div",{className:"flex items-center justify-start gap-2 p-1 px-3 w-full",children:[t.jsxs(W,{variant:"outline",children:["Effects: ",e.effects.length]}),t.jsx(W,{variant:e.combat?"outline":"secondary",className:v({"text-muted-foreground":e.combat}),children:"Dialog"}),t.jsx(W,{variant:e.combat?"secondary":"outline",className:v({"text-muted-foreground":!e.combat}),children:"Combat"}),e.combat&&t.jsxs(t.Fragment,{children:[t.jsx(xe,{orientation:"vertical"}),t.jsx(Lc,{})]}),Fo(e)==="running"&&t.jsx(Fc,{}),t.jsx("div",{className:"flex-1"}),t.jsx(W,{variant:"outline",asChild:!0,children:t.jsx(Ur,{to:"/crew",children:"edit party"})})]})}function Kc(){const e=y(i=>i.state.players),n=y(i=>i.state.combat),r=Bo(),o=H(),s=e.find(i=>i.ID===o),a=e.find(i=>i.ID!==o);return t.jsxs("div",{className:"h-screen w-screen flex flex-col items-center overflow-hidden",children:[t.jsx(Bc,{}),t.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[t.jsx(ec,{encounter:a,current:r}),n&&t.jsx(Gs,{current:r}),!n&&t.jsx(Fi,{}),t.jsx(kc,{player:s,current:r})]}),r&&n?.phase==="main"&&t.jsx(Us,{currentAction:r})]})}export{Kc as component};
